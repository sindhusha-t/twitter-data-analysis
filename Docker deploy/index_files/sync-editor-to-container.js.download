var originalBtoa=window.btoa;window.btoa=function(str){try{return originalBtoa(unescape(encodeURIComponent(str)))}catch(err){console.error(err);if(window.trackJs){trackJs.console.info("failed to base64 encode string: ",str);trackJs.track(err)}return"Invalid String"}};var SyncEditorToContainer=function(term_view){var CODE_CHANGED="code-changed-event";var TERMINAL_READY="terminal-ready-event";var ready=false;var queue=[];this.init=function(){document.addEventListener(CODE_CHANGED,execute);document.addEventListener(TERMINAL_READY,drain)};function getDirName(e){if(e===null||e===undefined)return"/";if(e.indexOf&&e.indexOf("/")!==-1){e=e.split("/");e.pop();e=e.join("/");if(e==="")return"/";return e}return"/"}var execute=function(e){var file=e.detail.filename;var path=getDirName(e.detail.path);if(path[0]!==".")path="./"+path;var code=e.detail.code;var encoded=window.btoa(code);var data={path:path,file:file,contents:encoded};if(ready)term_view.saveFile(data);else queue.push(data)};var drain=function(){ready=true;for(var i=0;i<queue.length;i++){var data=queue[i];term_view.saveFile(data)}}};